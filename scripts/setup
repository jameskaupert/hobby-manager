#!/bin/bash
set -euo pipefail

echo "Setting up hobby-manager development environment..."

eval "$(mise activate bash)"
mise trust && mise install

if [ ! -d "$HOME/.local/share/chezmoi" ]; then
    echo "Applying dotfiles..."
    git clone --depth=1 https://github.com/jameskaupert/magic.git /tmp/magic
    cp -r /tmp/magic/chezmoi-source ~/.local/share/chezmoi
    rm -rf /tmp/magic
    mise exec -- chezmoi apply
fi

mise exec -- pip install -r requirements.txt
echo "Setup complete!"